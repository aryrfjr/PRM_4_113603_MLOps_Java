<h2>Nominal Compositions</h2>

<div *ngIf="loading">Loading...</div>
<div *ngIf="error" class="error">{{ error }}</div>

<!-- TABLE -->
<table *ngIf="!loading && compositions.length > 0" border="1" cellpadding="8">
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Created At</th>
      <th>Updated At</th>
      <th>Created By</th>
      <th>Updated By</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let comp of compositions">
      <td>{{ comp.name }}</td>
      <td>{{ comp.description || "-" }}</td>
      <td>{{ comp.created_at | date : "short" }}</td>
      <td>{{ comp.updated_at | date : "short" }}</td>
      <td>{{ comp.created_by }}</td>
      <td>{{ comp.updated_by }}</td>
    </tr>
  </tbody>
</table>

<p *ngIf="!loading && compositions.length === 0">No compositions found.</p>

<!-- CREATE FORM TOGGLE -->
<button (click)="toggleForm()">
  {{ showForm ? "Cancel" : "+ Create New" }}
</button>

<!-- CREATE FORM -->
<div *ngIf="showForm" class="form-container">
  <h3>Create New Composition</h3>

  <div *ngIf="formError" class="error">{{ formError }}</div>
  <div *ngIf="formSuccess" class="success">{{ formSuccess }}</div>

  <label>
    Name *
    <input [(ngModel)]="name" placeholder="Enter composition name" />
  </label>

  <label>
    Description
    <textarea
      [(ngModel)]="description"
      placeholder="Optional description"
    ></textarea>
  </label>

  <button (click)="createComposition()">Submit</button>
</div>
