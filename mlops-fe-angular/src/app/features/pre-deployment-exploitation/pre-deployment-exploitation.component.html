<h2>Pre-Deployment Exploitation</h2>

<div class="exploration-container">
  <!-- Dropdowns -->
  <label for="composition-select">Select Nominal Composition:</label>
  <select
    id="composition-select"
    [(ngModel)]="selectedNominalCompositionId"
    (ngModelChange)="onNominalCompositionSelected($event)"
  >
    <option *ngFor="let comp of allNominalCompositions" [value]="comp.id">
      {{ comp.name }}
    </option>
  </select>

  <label for="run-select">Select Run #:</label>
  <select
    id="run-select"
    [(ngModel)]="selectedRunId"
    (ngModelChange)="onRunSelected($event)"
  >
    <option *ngFor="let run of selectedRuns" [value]="run.id">
      {{ run.run_number }}
    </option>
  </select>

  <!-- Tabs -->
  <div class="tabs">
    <button
      [class.active]="uiState.isTabScheduleActive"
      (click)="activeTab = 'tab1'"
    >
      Schedule calculations sub-Runs
    </button>
    <button [class.active]="uiState.isTabViewActive" (click)="activateTab2()">
      View all scheduled sub-Runs
    </button>
  </div>

  <!-- Tab "Schedule calculations Runs" -->
  <div
    *ngIf="uiState.displayAlertMessage"
    class="{{ uiState.alertMessageType }}"
  >
    {{ uiState.alertMessage }}
  </div>

  <div *ngIf="uiState.isTabScheduleActive">
    <p *ngIf="uiState.suggestRunSelection">
      Select a Nominal Composition and a Run to schedule sub-Runs for.
    </p>

    <div
      *ngIf="uiState.displayScheduleForm && uiState.displayGeomTransfCheckboxes"
    >
      <!-- Checkboxes -->
      <div *ngFor="let transformation of allGeomTransfTypes" class="checkbox">
        <input
          [disabled]="isDisabled(transformation.index)"
          type="checkbox"
          [checked]="isChecked(transformation.index)"
          (change)="onCheckboxChange($event, transformation.index)"
        />
        <label
          >{{ transformation.label }} (<b
            >sub-Run # {{ transformation.index }}</b
          >)</label
        >
      </div>

      <button (click)="scheduleSubRuns()">Schedule</button>
    </div>
  </div>

  <!-- Tab "View all scheduled sub-Runs" -->
  <div *ngIf="uiState.isTabViewActive">
    <p *ngIf="uiState.suggestRunSelection">
      Select a Nominal Composition and then a Run #.
    </p>

    <sub-runs-data-table
      *ngIf="uiState.displaySubRunsTable"
      [selectedRunId]="selectedRunId"
      [selectedRunNumber]="selectedRunNumber"
    ></sub-runs-data-table>
  </div>
</div>
